jQuery(document).ready(function(a){var b=function(){var f=a(this).closest(".edit-rating-box"),h=f.data("field"),c=f.find(".rating-form"),e=f.find(".rating-display"),i=f.find(".edit-rating-success"),g=f.find(".current-rating").val(),d=a("#post_ID").val()||0,j=f.find(".edit-rating-buttons-2");c.find("input[value="+g+"]").prop("checked",true);j.children(".save").off("click");j.children(".cancel").off("click");e.hide();c.showInlineBlock();i.html("");j.children(".save").on("click",function(){var m=c.find("input:checked").val();var k=c.find("input:checked").attr("name");var l=k.match(/\[(.*)\]/).pop();if(m===g){j.children(".cancel").trigger("click");return}a.post(ajaxurl,{action:"wpttst_edit_rating",post_id:d,field_name:l,rating:m,editratingnonce:a("#edit-"+h+"-nonce").val()},function(o){console.log(o);var p=JSON.parse(o);var n=e.find(".inner");n.html(p.display);i.html(p.message);c.find("input[value="+m+"]").prop("checked",true);if(i.hasClass("hidden")){i.fadeIn("fast",function(){i.removeClass("hidden")})}g=m;f.find(".current-rating").val(m);c.hide();e.showInlineBlock()});return false});j.children(".cancel").on("click",function(){c.find("input[value="+g+"]").prop("checked",true);c.hide();e.showInlineBlock();return false});j.children(".zero").on("click",function(){c.find("input[value=0]").prop("checked",true);a(this).trigger("blur");return false})};a.fn.showInlineBlock=function(){return this.css("display","inline-block")};a(".edit-rating").on("click",b)});